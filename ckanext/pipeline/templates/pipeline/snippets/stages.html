{#
Inserts a stepped progress indicator for the new package form. Each stage can
have one of three states, "uncomplete", "complete" and "active".

stages - A list of states for each of the three stages. Missing stages default
         to "uncomplete".

Example:

    {% snippet 'pipeline/snippets/stages.html', stages=['complete', 'active'], labels=['stage1', 'stage2'] %}

#}

{% set controller = 'ckanext.controllers.pipeline:ICController' %}

{% set s1 = stages[0] or 'active' %}
{% set s2 = stages[1] or 'uncomplete' %}
{% set s3 = stages[2] or 'uncomplete' %}
{% if s1 != 'uncomplete' %}{% set class = 'stage-1' %}{% endif %}
{% if s2 != 'uncomplete' %}{% set class = 'stage-2' %}{% endif %}
{% if s3 != 'uncomplete' %}{% set class = 'stage-3' %}{% endif %}

{% set l1 = labels[0] or '...' %}
{% set l2 = labels[1] or '...' %}
{% set l3 = labels[2] or '...' %}

<ol class="stages {{ class }}">
  <li class="first {{ s1 }}">
    <span class="highlight">{{ l1 }}</span>
  </li>
  <li class="middle {{ s2 }}">
  	<span class="highlight">{{ l2 }}</span>
  </li>
  <li class="last {{ s3 }}">
  	<span class="highlight">{{ l3 }}</span>
  </li>
</ol>
